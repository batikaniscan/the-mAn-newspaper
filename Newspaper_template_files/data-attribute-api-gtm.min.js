!function(){"use strict";var e="data-track",t=()=>({DATA_HOOK:e,EVENT_SEPARATOR:"||",UTILITY_ATTRIBUTES:{prefer:"".concat(e,"-prefer")},LISTENER_EVENTS:["click","submit","change"],PARENT_PARAMETERS:["context"],LEGACY_PARENT_PARAMETERS:["component"]}),a=new Set(["pdf","xls","xlsx","doc","docx","txt","rtf","csv","exe","key","pps","ppt","pptx","7z","pkg","rar","gz","zip","avi","mov","mp4","mpg","mpeg","wmv","mid","midi","mp3","wav","wma"]),r=e=>{var t=e.split(/[#?]/)[0].split(".").pop().trim();return a.has(t)&&t},n=e=>e.replaceAll(/([a-z])([A-Z])/g,"$1_$2").replaceAll(/[\s-]+/g,"_").replaceAll(/([A-Z]+)/g,(e=>"_".concat(e.toLowerCase()))).replaceAll(/^_+|_+$/g,"").replaceAll(/_+/g,"_").toLowerCase(),o=e=>{if("string"==typeof e)try{var t=JSON.parse(e);return"object"==typeof t&&null!==t?t:void 0}catch(t){console.warn("Invalid JSON string:",e)}},{DATA_HOOK:c,UTILITY_ATTRIBUTES:i,EVENT_SEPARATOR:l,PARENT_PARAMETERS:s,LEGACY_PARENT_PARAMETERS:p}=t(),m=e=>{return e===c?"eventName":(t=e.split("".concat(c,"-")).pop(),n(t).split("_").map(((e,t)=>t>0?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(""));var t},v=e=>{var t,a,r={event:"track",track:{}};for(var n of(t=e,a="ecommerce",Object.prototype.hasOwnProperty.call(t,a)&&(r.event="track_ecommerce"),Object.keys(e)))if("ecommerce"===n){var c=o(e[n]);"object"==typeof c&&Object.keys(c).length>0&&(r.track[n]=c)}else r.track[n]=e[n];Array.isArray(window.dataLayer)&&"function"==typeof window.dataLayer.push&&window.dataLayer.push({track:void 0},r)},f=e=>{var t=(e=>{var t=Array.from(e.attributes).filter((e=>e.name.includes("".concat(c)))),a={};for(var r of t){var{name:n,value:o}=r,l=m(n);Object.values(i).includes(n)||(a[l]=o)}return a})(e),a=(e=>{var t={},a=p.concat(s);for(var r of a){var n="".concat(c,"-").concat(r),o=e.closest("[".concat(n,"]"));o!==e&&null!==o&&(t[m(n)]=o.getAttribute(n))}return t})(e);if(t.eventName){var r=t.eventName.includes(l),o=Object.assign(a,t);return r&&(o.eventName=t.eventName.split(l).map((e=>n(e))).pop()),o}},u=(e,t)=>{var a={eventType:t};"A"===e.tagName&&Object.assign(a,(e=>{if(!e.href)throw new Error("Link element must contain an href attribute. If it is purely interactional, consider a button element instead.");var t=e.getAttribute("href"),a=e.hasAttribute("download"),n=r(t),o=(e=>e.split("/").pop())(t),c={linkUrl:t,linkText:e.textContent?e.textContent.trim().replaceAll(/ {2,}|[\t\n\r]/gm," "):""};return(n||a)&&(c.eventName="file_download"),n&&(c.fileExtension=n,c.fileName=o),c})(e));var o=Object.assign(a,f(e)||{});if(o.eventName){if(o.eventName=n(o.eventName),"search"===o.eventName&&"FORM"===e.tagName){var c=e.querySelector('input[type="search"], input[type="text"]');o.searchTerm=c.value||""}v(o)}else console.warn("No event name set for event tracking")},{DATA_HOOK:A,UTILITY_ATTRIBUTES:T,LISTENER_EVENTS:d}=t(),E=e=>{var{type:t,target:a}=e,n=a.closest("[".concat(A,"]"))||(e=>{var t=e.closest("a");if(t&&r(t.href))return t})(a);if(n){var o="FORM"===n.tagName,c="OPTION"===n.tagName;if(!(o&&"submit"!==t||c)){if((e=>{var t=e.tagName.toLowerCase(),a=e.type,r=e.closest("form"),n=("button"===t||"input"===t)&&"submit"===a&&r,o="textarea"===t||"input"===t&&!["hidden","image","reset","button"].includes(a),c="form"===t;return n&&console.warn('There was an attempt to track an event on an element that submits a form. Either set the data-track attributes on the form element instead, or add the data-track-prefer="click" to the '.concat(t," element")),Boolean(n||o||c)})(a)){var i=n.getAttribute(T.prefer);if(null!==i){if(t!==i)return}else if("click"===t)return;a!==n&&console.warn("Ensure that duplicate events are not being collected, i.e. an event from a parent element as well as a ".concat(t," event from the ").concat(a.type," element."))}u(n,t)}}};(()=>{for(var e of d)document.addEventListener(e,E)})()}();
